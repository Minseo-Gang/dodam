<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.kh.dodamPj.lost">
  
  		<!-- 신고서 목록 -->
  		<select id="reportList" resultType="LostVo">
  			select * from tbl_lost
  			order by b_no desc
  		</select>
  		
  		<!-- 신고서 작성 -->
  		<insert id="insertReport">
  			insert into tbl_lost
  					(b_no, b_title, user_name, user_tel, user_email, p_name, p_species, p_age, p_gender, p_lostdate, 
  					p_lostplace, p_character)
  			values (seq_lost_bno.nextval, #{b_title}, #{user_name}, #{user_tel}, #{user_email, jdbcType=VARCHAR}, 
  					#{p_name}, #{p_species}, #{p_age}, #{p_gender}, 
  					#{p_lostdate}, #{p_lostplace}, #{p_character, jdbcType=VARCHAR})
  		</insert>
  		
  		<!-- 신고서 조회 -->
  		<select id="reportContent" resultType="LostVo">
  			select * from tbl_lost
  			where b_no = #{b_no}
  		</select>
  		
  		<!-- 신고서 수정 -->
  		<update id="updateReport">
  			update tbl_lost set
  				b_title = #{b_title},
  				user_tel = #{user_tel},
  				user_email = #{user_email, jdbcType=VARCHAR},
  				p_lostdate = #{p_lostdate},
  				p_lostplace = #{p_lostplace},
  				p_character = #{p_character, jdbcType=VARCHAR}
  			where b_no = #{b_no}
  		</update>
  		
  		<!-- 신고서 삭제 -->
  		<delete id="deleteReport">
  			delete from tbl_lost
  			where b_no = #{b_no}
  		</delete>
  		
  		<!-- 조회수 증가 -->
  		<update id="updateViewcnt">
  			update tbl_lost set
  				b_viewcnt = b_viewcnt + 1
  			where b_no = #{b_no}
  		</update>
  
  </mapper>